#!/bin/bash

# Vérification que le répertoire est fourni
if [ $# -ne 1 ]
then
    echo "Nombre d'arguments incorrect"
    echo "Usage : $0 <répertoire>"
    exit 1
fi

source_dir="$1"
dest_dir="$source_dir/bin"

# Création le répertoire de destination s'il n'existe pas
mkdir -p "$dest_dir"

# Parcours des fichiers du répertoire source
for fichier in "$source_dir"/*.java
do
    # Éxecuter javac_test.sh sur le fichier
    if ./javac_test.sh "$fichier"
    then
        # Récupération du nom du fichier Java
        nom_fichier="${fichier%.java}"

        # Déplacement du fichier compilé dans le répertoire de destination
        mv "$nom_fichier.class" "$dest_dir"
    fi
done